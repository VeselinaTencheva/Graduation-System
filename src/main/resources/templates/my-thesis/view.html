<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: header('My Thesis')">
</head>
<body>
    <nav th:replace="fragments/layout :: navigation"></nav>
    
    <div class="container">
        <div th:replace="fragments/layout :: message"></div>
        
        <div class="card">
            <div class="card-header">
                <h3 class="card-title mb-0">My Thesis Status</h3>
            </div>
            <div class="card-body">
                <div th:if="${thesisApplication == null}" class="alert alert-info">
                    <i class="bi bi-info-circle"></i> You don't have an approved thesis application yet. 
                    Please contact your supervisor to submit a thesis application.
                </div>
                
                <div th:if="${thesisApplication != null}" class="mb-4">
                    <h4>Thesis Application</h4>
                    <dl class="row">
                        <dt class="col-sm-3">Title:</dt>
                        <dd class="col-sm-9" th:text="${thesisApplication.title}"></dd>
                        
                        <dt class="col-sm-3">Supervisor:</dt>
                        <dd class="col-sm-9" th:text="${thesisApplication.supervisor.name}"></dd>
                        
                        <dt class="col-sm-3">Status:</dt>
                        <dd class="col-sm-9">
                            <span th:if="${thesisApplication.isApproved()}" class="badge bg-success">Approved</span>
                            <span th:if="${thesisApplication.isRejected()}" class="badge bg-danger">Rejected</span>
                            <span th:if="${thesisApplication.isPending()}" class="badge bg-primary">Pending</span>
                        </dd>
                    </dl>
                    
                    <div th:if="${thesisApplication.isApproved()}" class="mt-4">
                        <h4>Thesis Status</h4>
                        
                        <div th:if="${thesis == null}" class="alert alert-warning">
                            <i class="bi bi-exclamation-triangle"></i> You haven't submitted your thesis yet.
                            <div class="mt-3">
                                <a th:href="@{/my-thesis/submit(applicationId=${thesisApplication.id})}" 
                                   class="btn btn-primary">
                                    <i class="bi bi-upload"></i> Submit Thesis
                                </a>
                            </div>
                        </div>
                        
                        <div th:if="${thesis != null}" class="alert alert-success">
                            <i class="bi bi-check-circle"></i> Your thesis has been submitted!
                            <dl class="row mt-3 mb-0">
                                <dt class="col-sm-3">Uploaded on:</dt>
                                <dd class="col-sm-9" th:text="${#temporals.format(thesis.uploadDate, 'dd-MM-yyyy HH:mm')}"></dd>
                            </dl>
                            <div class="mt-3">
                                <a th:href="@{/theses/{id}(id=${thesis.id})}" class="btn btn-outline-primary">
                                    <i class="bi bi-file-text"></i> View Thesis
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer th:replace="fragments/layout :: footer"></footer>
</body>
</html>
